(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{1648:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/current-orders",function(){return a(8303)}])},2010:function(e,s,a){"use strict";var c=a(5893),r=a(1436),l=a(7814),i=a(1664),d=a.n(i);let n="p-2 my-list-item";s.Z=function(e){let{current:s}=e;return(0,c.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,c.jsx)("div",{className:"card-header",children:(0,c.jsx)("h4",{className:"mb-0 fw-semibold py-2",children:"Account"})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,c.jsx)(d(),{legacyBehavior:!0,href:"/account/profile",children:(0,c.jsxs)("a",{className:n+("profile"==s?" active":""),children:[(0,c.jsx)(l.G,{icon:r.U6l,className:"me-2",fixedWidth:!0}),"My profile"]})}),(0,c.jsx)(d(),{legacyBehavior:!0,href:"/account/current-orders",children:(0,c.jsxs)("a",{className:n+("current-orders"==s?" active":""),children:[(0,c.jsx)(l.G,{icon:["fas","shopping-bag"],className:"me-2",fixedWidth:!0}),"Current orders"]})}),(0,c.jsx)(d(),{legacyBehavior:!0,href:"/account/order-history",children:(0,c.jsxs)("a",{className:n+("order-history"==s?" active":""),children:[(0,c.jsx)(l.G,{icon:["fas","truck"],className:"me-2",fixedWidth:!0}),"Orders history"]})}),(0,c.jsx)(d(),{legacyBehavior:!0,href:"/account/favorite-list",children:(0,c.jsxs)("a",{className:n+("favorite-list"==s?" active":""),children:[(0,c.jsx)(l.G,{icon:["fas","heart"],className:"me-2",fixedWidth:!0}),"My favorites"]})})]})})]})}},1227:function(e,s,a){"use strict";var c=a(5893),r=a(1664),l=a.n(r),i=a(7294),d=a(9566);s.Z=function(e){let{item:s,quantity:a}=e,[r,n]=(0,i.useState)({image:"/images/loading.gif",price:"pending...",name:"pending..."});return(0,i.useEffect)(()=>{d.Z.get("api/product/find/".concat(s)).then(e=>{n(e.data)}).catch(e=>{console.log(e.response)})},[]),(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsx)("div",{className:"flex-shink-0",children:(0,c.jsx)("img",{className:"rounded",src:r.image,width:80,height:80,alt:"Product image.",style:{objectFit:"cover"}})}),(0,c.jsx)("div",{className:"flex-grow-1 ms-3 h-100",children:(0,c.jsxs)("div",{className:"vstack",children:[(0,c.jsx)(l(),{legacyBehavior:!0,href:"/product/".concat(s),children:(0,c.jsx)("a",{className:"text-dark text-decoration-none",children:r.name})}),(0,c.jsxs)("small",{className:"text-muted mb-2",style:{fontSize:12},children:[(0,c.jsx)("span",{children:r.category}),(0,c.jsx)("span",{children:r.sub_category?",&nbsp;".concat(r.sub_category):""})]}),(0,c.jsxs)("h6",{className:"mb-0",children:[a," \xd7 ",r.price]})]})})]})}},8303:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var c=a(5893),r=a(9566),l=a(2010),i=a(7814),d=a(1227),n=a(7294),t=function(e){let{id:s,items:a,total:l,date:t,city:o,region:h,maplink:m,street:x,status:j}=e,[u,N]=(0,n.useState)(!1),f=e=>{r.Z.post("api/order/cancel/".concat(e)).then(e=>{console.log(e.data)}).catch(e=>{console.log(e.response.data)})};return(0,c.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,c.jsx)("div",{className:"card-header py-3 bg-white",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col d-flex",children:(0,c.jsxs)("span",{className:"fw-semibold h5 my-auto",children:["Order ID: ",s]})}),(0,c.jsx)("div",{className:"col-auto",children:(0,c.jsx)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>f(s),children:"Cancel order"})})]})}),(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"row gx-2 gy-3",children:[(0,c.jsxs)("div",{className:"col-md-5",children:[(0,c.jsx)("h6",{className:"fw-bold",children:"Delivery Address"}),(0,c.jsxs)("div",{className:"vstack text-dark small",children:[(0,c.jsx)("span",{children:x}),(0,c.jsx)("span",{children:o}),(0,c.jsx)("span",{children:h}),(0,c.jsxs)("span",{children:["Maplink:\xa0",m?(0,c.jsx)("a",{href:m,target:"_blank",children:m}):"none"]})]})]}),(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("span",{className:"fw-bold text-success",children:(0,c.jsx)(i.G,{icon:["fas","money-bill-wave"],size:"lg"})}),(0,c.jsx)("span",{className:"ms-2 small",children:"Cash on delivery"}),(0,c.jsxs)("div",{className:"fw-semibold",children:["Total: ",l," ETB"]})]}),(0,c.jsxs)("div",{className:"col-md-3",children:[(0,c.jsx)("h6",{className:"fw-bold",children:"Status"}),(0,c.jsx)("div",{className:"text-warning",children:(0,c.jsx)("span",{className:"fw-semigold",children:j})})]})]}),(0,c.jsx)("hr",{className:"text-muted"}),(0,c.jsx)("div",{className:"row row-cols-1 row-cols-md-2 g-3",children:(0,c.jsx)("div",{className:"col",children:a.map(e=>(0,c.jsx)(d.Z,{item:e.productID,quantity:e.quantity},e.productID))})})]}),(0,c.jsxs)("div",{className:"card-footer small border-0 py-3 text-muted",children:["Order Date: ",t]})]})},o=a(2503),h=a(1163);function m(){let e=(0,h.useRouter)(),[s,a]=(0,n.useState)([]);return(0,n.useEffect)(()=>{localStorage.getItem("token")?r.Z.get("/api/users/order").then(e=>{a(e.data),console.log(e.data)}):e.push({pathname:"/auth/login"})},[]),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"bg-secondary",children:(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"row py-4 px-2",children:(0,c.jsx)("nav",{"aria-label":"breadcrumb col-12",children:(0,c.jsxs)("ol",{className:"breadcrumb mb-1",children:[(0,c.jsx)("li",{className:"breadcrumb-item",children:(0,c.jsx)("a",{href:"#",children:"Home"})}),(0,c.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Current Orders"})]})})})})}),(0,c.jsx)("div",{className:"container py-4",children:(0,c.jsxs)("div",{className:"row g-3",children:[(0,c.jsx)("div",{className:"col-lg-3",children:(0,c.jsx)(l.Z,{current:"current-orders"})}),(0,c.jsx)("div",{className:"col-lg-9",children:s.map(e=>(0,c.jsx)(t,{id:e.orderID,street:e.address.street,city:e.address.city,region:e.address.region,maplink:e.address.maplink&&e.address.maplink,total:e.total,status:e.status,date:e.createdAt,items:e.items},e.orderID))})]})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{})]})}m.getLayout=e=>(0,c.jsx)(o.Z,{simpleHeader:!0,children:e});var x=m}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1648)}),_N_E=e.O()}]);